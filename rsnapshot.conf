#################################################
# rsnapshot.conf - rsnapshot configuration file #
#################################################
#                                               #
# PLEASE BE AWARE OF THE FOLLOWING RULES:       #
#                                               #
# This file requires tabs between elements      #
#                                               #
# Directories require a trailing slash:         #
#   right: /home/                               #
#   wrong: /home                                #
#                                               #
#################################################

#######################
# CONFIG FILE VERSION #
#######################

config_version	1.2

###########################
# SNAPSHOT ROOT DIRECTORY #
###########################

# All snapshots will be stored under this root directory.
#
snapshot_root	/mnt/san2/backup-snapshots/

# If no_create_root is enabled, rsnapshot will not automatically create the
# snapshot_root directory. This is particularly useful if you are backing
# up to removable media, such as a FireWire or USB drive.
#
no_create_root	1

#################################
# EXTERNAL PROGRAM DEPENDENCIES #
#################################

# LINUX USERS:   Be sure to uncomment "cmd_cp". This gives you extra features.
# EVERYONE ELSE: Leave "cmd_cp" commented out for compatibility.
#
# See the README file or the man page for more details.
#
cmd_cp		/bin/cp

# uncomment this to use the rm program instead of the built-in perl routine.
#
cmd_rm		/bin/rm

# rsync must be enabled for anything to work. This is the only command that
# must be enabled.
#
cmd_rsync	/usr/bin/rsync

# Uncomment this to enable remote ssh backups over rsync.
#
cmd_ssh	/usr/bin/ssh

# Comment this out to disable syslog support.
#
cmd_logger	/usr/bin/logger

# Uncomment this to specify the path to "du" for disk usage checks.
# If you have an older version of "du", you may also want to check the
# "du_args" parameter below.
#
cmd_du		/usr/bin/du

# Uncomment this to specify the path to rsnapshot-diff.
#
#cmd_rsnapshot_diff	/usr/local/bin/rsnapshot-diff

# Specify the path to a script (and any optional arguments) to run right
# before rsnapshot syncs files
#
#cmd_preexec	/path/to/preexec/script

# Specify the path to a script (and any optional arguments) to run right
# after rsnapshot syncs files
#
#cmd_postexec	/path/to/postexec/script

#########################################
#           BACKUP INTERVALS            #
# Must be unique and in ascending order #
# i.e. hourly, daily, weekly, etc.      #
#########################################

interval	hourly	6
interval	daily	7
interval	weekly	4
interval	monthly	3

############################################
#              GLOBAL OPTIONS              #
# All are optional, with sensible defaults #
############################################

# Verbose level, 1 through 5.
# 1     Quiet           Print fatal errors only
# 2     Default         Print errors and warnings only
# 3     Verbose         Show equivalent shell commands being executed
# 4     Extra Verbose   Show extra verbose information
# 5     Debug mode      Everything
#
verbose		2

# Same as "verbose" above, but controls the amount of data sent to the
# logfile, if one is being used. The default is 3.
#
loglevel	2

# If you enable this, data will be written to the file you specify. The
# amount of data written is controlled by the "loglevel" parameter.
#
logfile	/var/log/rsnapshot

# If enabled, rsnapshot will write a lockfile to prevent two instances
# from running simultaneously (and messing up the snapshot_root).
# If you enable this, make sure the lockfile directory is not world
# writable. Otherwise anyone can prevent the program from running.
#
lockfile	/var/run/rsnapshot.pid

# Default rsync args. All rsync commands have at least these options set.
#
#rsync_short_args	-a
#rsync_long_args	--delete --numeric-ids --relative --delete-excluded

# ssh has no args passed by default, but you can specify some here.
#
#ssh_args	-p 22

# Default arguments for the "du" program (for disk space reporting).
# The GNU version of "du" is preferred. See the man page for more details.
# If your version of "du" doesn't support the -h flag, try -k flag instead.
#
#du_args	-csh

# If this is enabled, rsync won't span filesystem partitions within a
# backup point. This essentially passes the -x option to rsync.
# The default is 0 (off).
#
#one_fs		0

# The include and exclude parameters, if enabled, simply get passed directly
# to rsync. If you have multiple include/exclude patterns, put each one on a
# separate line. Please look up the --include and --exclude options in the
# rsync man page for more details on how to specify file name patterns. 
# 
#include	???
#include	???
#exclude	???
#exclude	???

# The include_file and exclude_file parameters, if enabled, simply get
# passed directly to rsync. Please look up the --include-from and
# --exclude-from options in the rsync man page for more details.
#
#include_file	/path/to/include/file
#exclude_file	/path/to/exclude/file

# If your version of rsync supports --link-dest, consider enable this.
# This is the best way to support special files (FIFOs, etc) cross-platform.
# The default is 0 (off).
#
link_dest	1

# When sync_first is enabled, it changes the default behaviour of rsnapshot.
# Normally, when rsnapshot is called with its lowest interval
# (i.e.: "rsnapshot hourly"), it will sync files AND rotate the lowest
# intervals. With sync_first enabled, "rsnapshot sync" handles the file sync,
# and all interval calls simply rotate files. See the man page for more
# details. The default is 0 (off).
#
#sync_first	0

# If enabled, rsnapshot will move the oldest directory for each interval
# to [interval_name].delete, then it will remove the lockfile and delete
# that directory just before it exits. The default is 0 (off).
#
#use_lazy_deletes	0

# Number of rsync re-tries. If you experience any network problems or
# network card issues that tend to cause ssh to crap-out with
# "Corrupted MAC on input" errors, for example, set this to a non-zero
# value to have the rsync operation re-tried
#
#rsync_numtries 0

###############################
### BACKUP POINTS / SCRIPTS ###
###############################

# LOCALHOST
#backup	/home/		localhost/
#backup	/etc/		localhost/
#backup	/usr/local/	localhost/
#backup	/var/log/rsnapshot		localhost/
#backup	/etc/passwd	localhost/
#backup	/home/foo/My Documents/		localhost/
#backup	/foo/bar/	localhost/	one_fs=1, rsync_short_args=-urltvpog
#backup_script	/usr/local/bin/backup_pgsql.sh	localhost/postgres/

# EXAMPLE.COM
#backup_script	/bin/date "+ backup of example.com started at %c"	unused1
#backup	root@example.com:/home/	example.com/	+rsync_long_args=--bwlimit=16,exclude=core
#backup	root@example.com:/etc/	example.com/	exclude=mtab,exclude=core
#backup_script	ssh root@example.com "mysqldump -A > /var/db/dump/mysql.sql"	unused2
#backup	root@example.com:/var/db/dump/	example.com/
#backup_script	/bin/date	"+ backup of example.com ended at %c"	unused9

# CVS.SOURCEFORGE.NET
#backup_script	/usr/local/bin/backup_rsnapshot_cvsroot.sh	rsnapshot.cvs.sourceforge.net/

# RSYNC.SAMBA.ORG
#backup	rsync://rsync.samba.org/rsyncftp/	rsync.samba.org/rsyncftp/

# BASE2
backup_script	/bin/date "+ backup of base2 started at %c" > start.txt		base2/base2_start/
backup		/etc/				base2/
backup		/root/				base2/
backup		/mnt/das1/iso_images/		base2/
backup		/mnt/das1/setup/		base2/
#/vz in symbolic link to /mnt/data1/openvz_files
backup		/vz/template/cache/		base2/
#Do not uncomment these. We should backup containers and VMs individually
#Also only important data within a VI should be backed up
#backup		/mnt/das1/openvz_files/		base2/
#backup		/mnt/das1/virtual_hosts/	base2/
backup_script	/bin/date "+ backup of base2 ended at %c" > end.txt		base2/base2_end/



# ca.virtual-labs.ac.in - CID 151
backup_script	/bin/date "+ backup of ca.virtual-labs.ac.in started at %c" > start.txt		ca.virtual-labs.ac.in/ca_start/
backup		/vz/private/151/etc/			ca.virtual-labs.ac.in/
backup		/vz/private/151/root/			ca.virtual-labs.ac.in/
backup		/vz/private/151/var/www/html/		ca.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of ca.virtual-labs.ac.in ended at %c" > end.txt		ca.virtual-labs.ac.in/ca_end/


# ldap.virtual-labs.ac.in - CID 152
backup_script	/bin/date "+ backup of ldap.virtual-labs.ac.in started at %c" > start.txt		ldap.virtual-labs.ac.in/ldap_start/
backup_script	/usr/sbin/vzctl exec 152 slapcat > ldap_database.ldif 2>error_output.txt  		ldap.virtual-labs.ac.in/ldap_database
backup		/vz/private/152/etc/			ldap.virtual-labs.ac.in/
backup		/vz/private/152/root/			ldap.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of ldap.virtual-labs.ac.in ended at %c" > end.txt		ldap.virtual-labs.ac.in/ldap_end/


# vlead.virtual-labs.ac.in - CID 153
backup_script	/bin/date "+ backup of vlead.virtual-labs.ac.in started at %c" > start.txt		vlead.virtual-labs.ac.in/vlead_start/
backup_script	/usr/sbin/vzctl exec 153 sshpass -p vlead123 mysqldump -u vlead_wiki -p vlead_wiki > vlead_wiki.sql   		vlead.virtual-labs.ac.in/vlead_wiki_database
backup		/vz/private/153/etc/			vlead.virtual-labs.ac.in/
backup		/vz/private/153/root/			vlead.virtual-labs.ac.in/
backup		/vz/private/153/opt/			vlead.virtual-labs.ac.in/
backup		/vz/private/153/var/www/html		vlead.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of vlead.virtual-labs.ac.in ended at %c" > end.txt		vlead.virtual-labs.ac.in/vlead_end/


#storage-manager.virtual-labs.ac.in - CID 154
#Backups for this container are not required


# router.virtual-labs.ac.in - CID 155
backup_script	/bin/date "+ backup of router.virtual-labs.ac.in started at %c" > start.txt		router.virtual-labs.ac.in/router_start/
backup		/vz/private/155/etc/			router.virtual-labs.ac.in/
backup		/vz/private/155/root/			router.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of router.virtual-labs.ac.in ended at %c" > end.txt		router.virtual-labs.ac.in/router_end/



# proxy.virtual-labs.ac.in - CID 156
backup_script	/bin/date "+ backup of proxy.virtual-labs.ac.in started at %c" > start.txt		proxy.virtual-labs.ac.in/proxy_start/
backup		/vz/private/156/etc/			proxy.virtual-labs.ac.in/
backup		/vz/private/156/root/			proxy.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of proxy.virtual-labs.ac.in ended at %c" > end.txt		proxy.virtual-labs.ac.in/proxy_end/


# ns.virtual-labs.ac.in - CID 157
backup_script	/bin/date "+ backup of ns.virtual-labs.ac.in started at %c" > start.txt		ns.virtual-labs.ac.in/ns_start/
backup		/vz/private/157/etc/			ns.virtual-labs.ac.in/
backup		/vz/private/157/root/			ns.virtual-labs.ac.in/
backup		/vz/private/157/var/named/chroot/	ns.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of ns.virtual-labs.ac.in ended at %c" > end.txt		ns.virtual-labs.ac.in/ns_end/


# forums.virtual-labs.ac.in - CID 158
backup_script	/bin/date "+ backup of forums.virtual-labs.ac.in started at %c" > start.txt		forums.virtual-labs.ac.in/forums_start/
backup		/vz/private/158/etc/			forums.virtual-labs.ac.in/
backup		/vz/private/158/var/www/forums/		forums.virtual-labs.ac.in/
backup_script	/usr/sbin/vzctl exec 158 mysqldump -u root -pvleadforums phpbb_forums > phpbb_forums.sql   		forums.virtual-labs.ac.in/forums_phpbb_database
backup_script	/bin/date "+ backup of forums.virtual-labs.ac.in ended at %c" > end.txt		forums.virtual-labs.ac.in/forums_end/


# http.virtual-labs.ac.in - CID 159
backup_script	/bin/date "+ backup of http.virtual-labs.ac.in started at %c" > start.txt		http.virtual-labs.ac.in/http_start/
backup		/vz/private/159/etc/			http.virtual-labs.ac.in/
backup		/vz/private/159/root/			http.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of http.virtual-labs.ac.in ended at %c" > end.txt		http.virtual-labs.ac.in/http_end/


# vpn.virtual-labs.ac.in - CID 160
backup_script	/bin/date "+ backup of vpn.virtual-labs.ac.in started at %c" > start.txt		vpn.virtual-labs.ac.in/vpn_start/
backup		/vz/private/160/etc/			vpn.virtual-labs.ac.in/
backup		/vz/private/160/root/			vpn.virtual-labs.ac.in/
backup		/vz/private/160/var/log/openvpn/	vpn.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of vpn.virtual-labs.ac.in ended at %c" > end.txt		vpn.virtual-labs.ac.in/vpn_end/


# feedback.virtual-labs.ac.in - CID 164
backup_script	/bin/date "+ backup of feedback.virtual-labs.ac.in started at %c" > start.txt	feedback.virtual-labs.ac.in/feedback_start/
backup		/vz/private/164/etc/			feedback.virtual-labs.ac.in/
backup		/vz/private/164/var/www/		feedback.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of feedback.virtual-labs.ac.in ended at %c" > end.txt	feedback.virtual-labs.ac.in/feedback_end/


# pascal.iiit.ac.in - CID 165
backup_script	/bin/date "+ backup of pascal.iiit.ac.in started at %c" > start.txt	pascal.iiit.ac.in/pascal_start/
backup_script	/usr/sbin/vzctl exec 165 slapcat > ldap_database.ldif 2>error_output.txt  	pascal.iiit.ac.in/ldap_database
backup_script	/usr/sbin/vzctl exec 165 mysqldump -u deepthi -pindiantoys d_wordpress > d_wordpress.sql	pascal.iiit.ac.in/d_wordpress_database
backup		/vz/private/165/etc/			pascal.iiit.ac.in/
backup		/vz/private/165/root/			pascal.iiit.ac.in/
backup		/vz/private/165/var/www/		pascal.iiit.ac.in/
backup		/vz/private/165/home/			pascal.iiit.ac.in/
backup_script	/bin/date "+ backup of pascal.iiit.ac.in ended at %c" > end.txt	pascal.iiit.ac.in/pascal_end/


# teach.pascal.iiit.ac.in - CID 167
backup_script	/bin/date "+ backup of teach.pascal.iiit.ac.in started at %c" > start.txt	teach.pascal.iiit.ac.in/teach.pascal_start/
backup		/vz/private/167/etc/			teach.pascal.iiit.ac.in/
backup		/vz/private/167/root/			teach.pascal.iiit.ac.in/
backup		/vz/private/167/home/			teach.pascal.iiit.ac.in/
backup_script	/bin/date "+ backup of teach.pascal.iiit.ac.in ended at %c" > end.txt	teach.pascal.iiit.ac.in/teach.pascal_end/



# developer.virtual-labs.ac.in - CID 168
backup_script	/bin/date "+ backup of developer.virtual-labs.ac.in started at %c" > start.txt	developer.virtual-labs.ac.in/developer_start/
backup		/vz/private/168/etc/			developer.virtual-labs.ac.in/
backup		/vz/private/168/root/			developer.virtual-labs.ac.in/
backup		/vz/private/168/home/			developer.virtual-labs.ac.in/
backup_script	/usr/sbin/vzctl exec 168 mysqldump -u root -pportal redmine > redmine.sql	developer.virtual-labs.ac.in/redmine_database/
backup_script	/bin/date "+ backup of developer.virtual-labs.ac.in ended at %c" > end.txt	developer.virtual-labs.ac.in/developer_end/


# ssh-tunnel.virtual-labs.ac.in - CID 169
backup_script	/bin/date "+ backup of ssh-tunnel.virtual-labs.ac.in started at %c" > start.txt	ssh-tunnel.virtual-labs.ac.in/ssh-tunnel_start/
backup		/vz/private/169/etc/			ssh-tunnel.virtual-labs.ac.in/
backup		/vz/private/169/root/			ssh-tunnel.virtual-labs.ac.in/
backup		/vz/private/169/home/			ssh-tunnel.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of ssh-tunnel.virtual-labs.ac.in ended at %c" > end.txt	ssh-tunnel.virtual-labs.ac.in/ssh-tunnel_end/



# issues.virtual-labs.ac.in - CID 170
backup_script	/bin/date "+ backup of issues.virtual-labs.ac.in started at %c" > start.txt	issues.virtual-labs.ac.in/issues_start/
backup_script	/usr/sbin/vzctl exec 170 mysqldump -u root -pS0m3th.ngMysql redmine > redmine.sql	issues.virtual-labs.ac.in/redmine_database/
backup		/vz/private/170/etc/			issues.virtual-labs.ac.in/
backup		/vz/private/170/root/			issues.virtual-labs.ac.in/
backup		/vz/private/170/home/			issues.virtual-labs.ac.in/
#backup		/vz/private/170/var/lib/mysql		issues.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of issues.virtual-labs.ac.in ended at %c" > end.txt		issues.virtual-labs.ac.in/issues_end/



# alipi.iiit.ac.in - CID 171
backup_script	/bin/date "+ backup of alipi.iiit.ac.in started at %c" > start.txt	alipi.iiit.ac.in/alipi_start/
backup		/vz/private/171/etc/			alipi.iiit.ac.in/
backup		/vz/private/171/root/			alipi.iiit.ac.in/
backup		/vz/private/171/home/			alipi.iiit.ac.in/
backup		/vz/private/171/var/www/		alipi.iiit.ac.in/
backup_script	/bin/date "+ backup of alipi.iiit.ac.in ended at %c" > end.txt		alipi.iiit.ac.in/alipi_end/


# ras.virtual-labs.ac.in - CID 181
backup_script	/bin/date "+ backup of ras.virtual-labs.ac.in started at %c" > start.txt		ras.virtual-labs.ac.in/ras_start/
backup		/vz/private/181/etc/			ras.virtual-labs.ac.in/
backup		/vz/private/181/var/www/scripts/	ras.virtual-labs.ac.in/
backup		/vz/private/181/var/www/vlead-ras/	ras.virtual-labs.ac.in/
backup		/vz/private/181/root/			ras.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of ras.virtual-labs.ac.in ended at %c" > end.txt		ras.virtual-labs.ac.in/ras_end/





#######################################
#######################################
###### REMOTE CONTAINER BACKUPS #######
#######################################
#######################################

#{bzr,git,svn}.virtual-labs.ac.in - 10.4.7.69
backup_script	/bin/date "+ backup of oldbzr.virtual-labs.ac.in started at %c" > start.txt	oldbzr.virtual-labs.ac.in/oldbzr_start/		+rsync_long_args=--bwlimit=200000
backup		root@10.4.7.69:/			oldbzr.virtual-labs.ac.in/complete/
#backup		root@10.4.7.69:/etc/			oldbzr.virtual-labs.ac.in/
#backup		root@10.4.7.69:/home/			oldbzr.virtual-labs.ac.in/
#backup		root@10.4.7.69:/labs/			oldbzr.virtual-labs.ac.in/
#backup		root@10.4.7.69:/root/			oldbzr.virtual-labs.ac.in/
#backup		root@10.4.7.69:/usr/			oldbzr.virtual-labs.ac.in/
#backup		root@10.4.7.69:/var/			oldbzr.virtual-labs.ac.in/
backup_script	/bin/date "+ backup of oldbzr.virtual-labs.ac.in completed at %c" > end.txt	oldbzr.virtual-labs.ac.in/oldbzr_end/



